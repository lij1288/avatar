# **数据集成和互操作性的延迟**

- 延迟（Latency）是在源系统生成数据与数据可在目标系统中使用的时间差，延迟可以很高（批处理）、很低（事件驱动）、非常低（实时同步）

### 批处理（Batch）

- 大多数数据以数据块或文件的形式根据消费者的请求或按照定期计划在应用程序和组织之间移动，这种类型的交互被称为批处理或ETL
- 批处理中发生变化的数据集被称为增量，某个时间点的数据被称为快照
- 批处理对于在短时间内处理大量数据非常有用，往往用于数据仓库数据集成解决方案，即使有较低延迟的解决方案可用
- 为了实现快速处理和降低延迟，一些数据集成解决方案使用微批处理，即安排批处理以比日常更高的频率运行，如每五分钟一次
- 批处理数据集成用于数据转换、移动和归档，以及从数据仓库和数据集市中抽取和加载。批处理的时间安排存在风险。为了最大限度地减少应用程序更新问题，应在工作日的逻辑处理结束时或在夜间对数据进行特殊处理之后安排应用程序之间的数据移动。

### 变更数据捕获（Change Data Capture）

- 更改数据捕获是一种通过过滤以仅包含在定义时间范围内更改的数据来减少带宽的分发。更改数据捕获监视数据集的更改，然后将这些更改传递到使用该数据的其他数据集、应用程序和组织。作为该过程的一部分，数据还可以用诸如标志或时间戳之类的标识符来标记。变更数据捕获可以基于数据或日志。
- 基于数据的变更捕获技术
  - 源系统添加特定的数据元素，如时间戳、编码或标记，其用作更改指示器，抽取过程根据规则来标识要抽取的行
  - 当数据更改时，源系统过程被添加到一个对象和标识符的简单列表中，通过该列表控制要抽取数据的选择
  - 作为事务的一部分，源系统过程复制已更改的数据到一个单独对象，该对象用于抽取处理，其不需要位于数据库管理系统内
- 在基于日志的变更数据捕获中，通过数据库管理系统创建的数据活动日志查找特定更改，并将其转换并应用到目标数据库。复杂的转换可能会困难，可通过类似源对象的中间结构暂存更改以进行进一步处理。

### 近实时和事件驱动（Near-real-time and Event-driven）

- 大多数不采用批处理的数据集成解决方案都使用近实时或事件驱动的解决方案。数据按定义的时间表在一天内以较小的数据集进行处理，或在事件（如数据更新）发生时处理数据。近实时处理比批处理有更低的延迟，同时因为工作随时间分布，业具有更低的系统负载，但其通常比同步数据集成解决方案慢。近实时数据集成解决方案通常使用企业服务总线（enterprise service bus）来实现。

### 异步（Asynchronous）

- 在异步数据流中，提供数据的系统在继续处理前不会等待接收系统确认更新。异步意味着发送或接收系统可能会在一段时间内离线，而另一个系统不会离线。
- 由于异步中对应用程序进行的数据更新部署立即的，因此称为近实时。在近实时环境中，源系统中进行的更新与发送目标系统数据集之间的延迟通常以秒或分钟为单位进行测量。

### 实时，同步（Real-time, Synchronous）

- 当一个数据集中的数据必须与另一个数据集中的数据保持完全同步时，必须使用实时、同步的解决方案。
- 在同步集成解决方案中，执行流程在进行下一个活动或事务前等待来自其他应用程序或流程的确认。数据集可以通过数据库功能（如两阶段提交）保持同步，来确保所有更新全部成功或不进行任何更新。如金融机构使用两阶段提交解决方案来确保金融交易表和金融余额表绝对同步。
- 实时同步解决方案比异步解决方案需要更少的状态管理，因为处理事务的顺序由更新应用程序明确管理，但其可能导致其他事务的阻塞和延迟。

### 低延迟或流处理（Low Latency or Streaming）

- 低延迟数据集成解决方案旨在最大限度地缩短事件响应事件，可能包括使用固态磁盘等硬件解决方案或内存数据库等软件解决方案。
- 异步解决方案通常用于低延迟解决方案，以便事务无需等待后续流程的确认即可处理下一条数据。
- 低延迟解决方案常采用大规模多处理（massive multi-processing）或同时处理（simultaneous processing），将传入的数据同时分布到多个处理器上，而不会受到单个或少量处理器的瓶颈影响。