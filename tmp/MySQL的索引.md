## MySQL的索引

- 索引：帮助高效获取数据的数据结构
- MySQL索引上限为16个

### 索引作用

- 减少磁盘IO次数
- 保证数据唯一性
- 加速表与表的连接
- 减少分组和排序的实际

### 索引影响

- 创建和维护耗费时间
- 占用磁盘空间
- 降低更新表的速度

### B+Tree

- 树的层次越低，IO次数越少

- 叶子节点（0层）
  - 存放普通记录
  - 叶子节点内的每条数据之间是单向链表
  - 叶子节点之间是双向链表
- 非叶子节点（1层）
  - 存放目录页
- 根节点（2层）
  - 存放目录页
- 记录的组成部分
  - 记录类型：0普通记录、1目录项记录、2最小记录、3最大记录
  - 下一条记录地址相对本条记录地址的偏移量
  - 各列的值：c1、c2、c3...
  - 其他信息

### 索引的分类

#### 聚簇索引

- 不是一种单独的索引类型，而是一种数据存储方式（所有用户记录都存储在叶子节点），索引即数据，数据行和相邻的键值存储在一起。聚簇索引在MySQL中不需要显式地使用index语句创建，InnoDB存储引擎会自动创建聚簇索引
- 特点
  1. 页内记录按主键大小顺序组成单向链表
  2. 各个存放用户记录的页按页中记录的主键大小组成双向链表
  3. 存放目录项记录的页分为不同层次，同一层次的页按页中目录项记录的主键大小组成双向链表
  4. 叶子节点存放完整的用户记录
- 优点
- 缺点
- 限制

#### 非聚簇索引（二级索引、辅助索引）

- 特点

  - 页内记录按c2列的大小顺序排成单向链表

  - 各个存放用户记录的页按页中记录的c2列大小组成双向链表

  - 存放目录项记录的页分为不同层次，同一层次的页按页中目录项记录的c2列大小组成双向链表

  - 叶子节点不存放完整用户记录，存放c2列和主键

    