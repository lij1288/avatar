# 数据存储和操作相关概念

- 数据存储和操作包括对存储数据的设计、实施和支持，以在其从创建/获取（creation/acquisition）到处置（disposal）的整个生命周期中最大化其价值
- 数据存储和操作包括两个子活动
  - 数据库支持
    - 侧重于与数据生命周期相关的活动，从数据库环境的初始实施、到获取、备份和清除数据（obtaining, backing up, and purging dat），也包括确认数据库运行良好，监控和调整（Monitoring and tuning）对于数据库支持至关重要
  - 数据库技术支持
    - 包括定义满足组织需求的技术要求、定义技术架构、安装和管理技术以及解决与技术相关的问题

## 数据存储和操作的驱动因素

- 公司依靠其信息系统运行业务，数据存储和操作活动队伍依赖数据的组织至关重要，业务连续性是这些活动的主要驱动力，如果系统不可用，公司运营可能会受到影响或完全停止，用于IT运营的可靠数据存储基础设施（infrastructure）可以最大限度地降低中断风险（the risk of disruption）

## 数据存储和操作的目标

- 在整个数据生命周期中管理数据的可用性
- 确保数据资产的完整性
- 管理数据事务的性能

## 数据存储和操作的原则

- 识别自动化机会并采取行动（Identify and act on automation opportunities）
  - 自动化数据库开发过程、开发工具和流程，缩短每个开发周期，减少错误和返工，并最大限度地减少对开发团队的影响
  - 通过自动化，DBA可以适应对应用程序开发的更多迭代（敏捷）方法，自动化应与数据建模和数据架构协作完成
- 在构建时考虑重用（Build with reuse in mind）
  - 开发和促进对抽象和可重用数据对象的使用，以防止应用程序域数据库模式紧密耦合（即对象关系阻抗不匹配（object-relational impedance mismatch））
  - 可以使用数据库视图、触发器、函数和存储过程、应用程序数据对象和数据访问层、XML和XSLT、ADO.NET类型数据集以及Web服务
  - 数据库管理员应能够评估虚拟化数据的最佳方法，最终目标是能够尽可能快速、简单、轻松地使用数据库
- 理解并且恰当地应用最佳实践（Understand and appropriately apply best practices）
  - 数据库管理员应遵循数据库标准和最佳实践，但如果给出可接受的原因，也可以灵活地（flexible ）偏离（deviate），数据库标准永远不应成为项目成功的威胁
- 连接数据库标准以支持需求（Connect database standards to support requirements）
  - 如服务水平协议（SLA，Service Level Agreement）可以反映数据库管理员推荐和开发人员接受的确保数据完整性和安全性的方法，如果开发团队将编写自己的数据库更新流程或数据访问层，则服务水平协议应反映责任从数据库管理员转移到开发团队，这样可防止对标准采取“all or nothing”的方法
- 设定对数据管理员角色在项目工作中的期望（Set expectations for the DBA role in project work）
  - 在项目定义阶段让数据库管理员参与其中（）可以帮助整个系统开发生命周期（SDLC），数据管理员可以预先（up-front）了解项目需求和支持需求，这将阐明项目团队对数据组的期望，并因此改善沟通
  - 在分析和设计期间拥有专门的（dedicated）主要和次要数据管理员明确了对数据管理员任务、标准、工作效果（work effort）和时间线，团队还应明确实施后对支持的期望

## 数据库术语（Database Terms）

- 数据库（Database）
  - 任何存储数据的集合，无论其结构或内容如何，一些大型数据库有实例和模式
- 实例（Instance）
  - 通过数据库软件对一个特定存储区域的访问控制，一个组织通常由多个实例同时执行，使用不同的促成你区域，每个实例都独立（independent）于其他实例
- 模式（Schema）
  - 数据库或实例中包含的数据库对象的子集，模式用于将对象组织成更可管理的的部分，通常一个模式有一个所有者和一个特定于访问内容的访问列表
  - 模式的常见用途是将包含敏感（sensitive）数据的对象与一般用户进行隔离（isolate），或将只读视图与关系数据库中的基础表进行隔离，模式也可用来指代具有共同点的数据库结构的集合
- 节点（Node）
  - 作为分布式（distributed）数据库的一部分托管处理或数据的单个（individual）计算机
- 数据库抽象（Database abstraction）
  - 用于调用数据库函数的通用应用程序接口（API），借此应用程序可以连接到多个不同的数据库，而程序员不需指导所有可能的数据库的所有函数调用
  - 开放式数据库连接（ODBC，）是支持数据库抽象的API示例，优点是可移植性（portability），缺点是无法使用不通用的特定数据库功能

## 数据生命周期管理（Data Lifecycle Management）

- 数据库管理员通过设计、实施和使用存储、处理或检索数据的任何系统来维护和确保数据在其整个生命周期内的准确性和一致性，数据库管理员是所有数据库更改的监管人（custodian），许多方面可能会请求更改，数据库管理员确定要对数据库进行的精确更改，并实施更改和控制更改
- 数据生命周期管理包括实施数据获取（acquisition）、迁移（migration）、保留（retention）、到期（expiration）和处置（disposition）的策略和流程，谨慎的（prudent）做法是准备检查表（checklists）以确保所有任务都高质量执行，数据库管理员应使用受控的、有记录的和可审核的过程将应用程序数据库移动更改为质量保证或认证和生产环境（Quality Assurance or Certification (QA) and Production environments）

## 管理员（Administrators）

- 数据库管理员是数据存储和操作中的主导（dominant）角色，是数据安全、数据建模的物理方面和数据库设计中的关键（critical）角色，数据库管理员为开发、测试、质量担保和特殊用途的数据库环境提供支持
- 数据库管理员不是执行数据存储和操作活动的唯一角色，数据专员、数据架构师、网络管理员、数据分析师和安全分析师参与性能、保留和恢复的规划，这些团队可参与来自外部源（external sources）的数据获取和数据处理
- 很多数据库管理员专门担任生产、应用程序、过程和开发数据库管理员，一些组织有网络存储管理员（NSA，Network Storage Administrators），专门负责支持与数据存储应用程序或结构分开的数据存储系统，某些组织中每个专门角色向IT内的不同组织报告，生产数据库管理员属于生产基础设施或应用程序操作支持组，应用程序、开发和过程数据库管理员属于应用程序开发组织，网络存储管理员属于基础设施组织

### 生产数据库管理员（Production DBA）

- 生产数据库管理员主要负责数据操作管理
  - 通过性能调整、监控、错误报告和其他活动确保数据库的性能和可靠性
  - 实施备份和恢复机制以确保数据在任何境遇（circumstance）下丢失都可以恢复
  - 如果需要持续可用的数据，则实施数据库的集群（clustering）和故障转移（failover）机制
  - 进行其他数据库维护活动，如实施数据归档（archiving）机制
- 生产数据库管理员的交付成果
  - 生产数据库环境，包括支持服务器（supporting server）上的数据库管理系统（DBMS）实例，其具有充足的（sufficient）大小和容量以确保足够的（adequate）性能，并针对适当级别的安全性、可靠性和可用性进行配置
  - 生产环境中数据库更改的受控实施机制和流程
  - 确保数据的可用性、完整性和可恢复性以应对所有可能导致数据丢失或损坏（corruption）的机制
  - 检测（detect）和报告数据库、数据库管理系统或数据服务器中发生的任何错误的机制
  - 数据库可用性、恢复和性能（availability, recovery, and performance）符合服务级别协议
  - 在工作负载和数据量变化（workloads and data volumes vary）时监控数据库性能的机制和流程

### 应用程序数据库管理员（Application DBA）

- 应用程序数据库管理员负责所有环境（开发/测试、质量保证和生产）中的一个或多个数据库，而不是任何这些环境的数据库管理系统
- 有时应用程序数据库管理员向负责开发和维护其数据库所支持的应用程序的组织单位报告，设置应用程序数据库管理员有利有弊（pros and cons）
- 应用程序数据库管理员专注于特定的数据库，可用为应用程序开发人员提供更好地服务，但应用程序数据库管理员容易变得孤立（isolated）并且看不到组织的整体数据需求和常见的数据库管理员实践
- 应用程序数据库管理员与数据分析师、建模师和架构师密切合作

### 过程和开发数据库管理员（Procedural and Development DBAs）

- 过程数据库管理员领导对过程数据库对象（procedural database objects）的审查和管理，过程数据库管理员专门负责开发和支持由DBMS控制和执行的过程逻辑：存储过程、触发器和用户自定义函数，过程数据库管理员确保此过程逻辑得到计划、实施、测试和共享（重用）
- 开发数据库管理员专注于数据设计活动，包括创建和管理特殊用途数据库，如沙盒（sandbox）或探索区域（exploration areas）
- 很多情况下两个功能可以合并到一个位置下

### 网络存储管理员（NSA）

- 网络存储管理员关注支持数据库存储阵列（storage arrays）的硬件和软件，多个网络存储阵列系统与简单的数据库系统有不同的需求和监控要求

## 数据库架构类型（ Database Architecture Types）

- 数据库分为集中式（centralized）和分布式（distributed），集中式系统管理单个数据库，分布式系统管理多个系统上的多个数据库，分布式系统的组件可以柑橘组件系统的自治性（autonomy）分为联邦（federated）和非联邦（non-federated），也称为自治（autonomous）和非自治（non-autonomous）

![](assets/数据存储和操作相关概念/集中式和分布式.jpg)

### 集中式数据库（Centralized Databases）

- 集中式数据库将一个系统的所有数据集中在一处，所有用户都来到同一个系统访问数据，对于某些受限的（restricted）数据，集中式可能是理想的，但对于需要广泛可用的数据，集中式数据库存在风险，如集中式系统不可用时，则没有其他方法可以访问数据

### 分布式数据库（Distributed Databases）

- 分布式数据库使快速访问大量节点上的数据称为可能，数据库管理软件在服务器之间复制数据，从而在计算机集群上提供高可用服务，数据库管理软件还可检测和处理故障
- 一些分布式数据库使用MapReduce计算模式（computational paradigm）以进一步提高性能，在MapReduce中，数据请求被分为很多小的工作片段（），每个工作片段可以在集群的任何节点上执行或重新执行，此外数据在计算节点是同地协作的（co-located），从而提供非常高的聚合带宽（bandwidth），文件系统和应用程序都设计为自动处理节点故障

#### 联邦数据库（Federated Databases）

- 数据联邦（federation）提供数据而不需要对源数据（source data）进行额外的持久化（persistence）或复制（duplication）
- 联邦数据库系统将多个自治数据库系统映射到单个联邦数据库中，这些构成的（constituent）数据库有时在地理上是分开的，通过计算机网络相互连接，其保持自治，但参与联邦以允许部分或受控地共享其数据
- 数据联邦不是实际的数据集成，而是通过数据互操作性将联邦数据库的视图作为一个大对象来管理
- 非联邦数据库系统是非自治的数据库管理系统的集成，其由集中式数据库管理系统控制、管理和治理
- 联邦数据库最适用于企业信息集成、数据虚拟化、模式匹配和主数据管理等异构和分布式集成项目（heterogeneous and distributed integration projects）

![](assets/数据存储和操作相关概念/联邦数据库.jpg)

- 联邦结构取决于组件数据库系统的集成级别和联邦提供的服务范围，联邦数据库管理系统分为松耦合或紧耦合（loosely or tightly coupled）
  - 松耦合系统的多个组件数据库构建其自己的联邦模式，用户使用多种数据库语言来访问各个组件数据库系统，但这消除了任何级别的位置透明性（location transparency），迫使用户直接了解联邦模式，用户从其他组件数据库导入所需的数据，并将其与自己的数据库集成以形成联邦模式
  - 紧耦合系统的组件系统使用独立的流程来构建和发布集成的联邦模式，相同的模式可以应用于联邦的所有部分，不需要数据复制

![](assets/数据存储和操作相关概念/耦合.jpg)

#### 区块链数据库（Blockchain Database）

- 区块链数据库是一种用于安全地管理金融交易的联邦数据库，其也可以用于合同管理或监控信息交换
- 区块链数据库包括两种类型的结构：单个记录（individual records）和块（blocks），每个交易有一条记录，数据库创建有时间限制的交易组（区块）链，交易组（区块）中包括链中前一个区块的信息，新生成的区块位于链的末端，通过哈希算法生产存储在区块中的交易信息，一旦新块被创建，旧块的哈希值就永远不再改变，这意味着块中包含的任何交易都不会改变，如果交易或块被更改则哈希值不再匹配

#### 虚拟化/云平台（Virtualization / Cloud Platforms）